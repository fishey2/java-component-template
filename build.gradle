plugins {
    id 'java'
    id 'idea'
    id 'jacoco'
    id 'org.springframework.boot' version '2.2.6.RELEASE'
    id 'io.spring.dependency-management' version '1.0.7.RELEASE'
    id "com.avast.gradle.docker-compose" version "0.10.7"
    id "org.sonarqube" version "2.8"
}

apply plugin: 'java'
apply plugin: 'io.spring.dependency-management'

group 'com.roboautomator'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
//    implementation('org.springframework.boot:spring-boot-dependencies')
    implementation('org.springframework.boot:spring-boot-starter-web')
    implementation('org.springframework.kafka:spring-kafka')
    implementation('ch.qos.logback:logback-classic:1.2.3')
    implementation('io.springfox:springfox-swagger2:2.9.2')
    implementation('io.springfox:springfox-swagger-ui:2.9.2')
    implementation('org.yaml:snakeyaml:1.26')

    testImplementation('org.junit.jupiter:junit-jupiter:5.5.2')
    testImplementation('org.springframework.boot:spring-boot-starter-test')
    testImplementation('org.springframework.kafka:spring-kafka-test')
    testImplementation('org.mockito:mockito-core:2.22.0')
    testImplementation('io.rest-assured:rest-assured:4.1.2')
    testImplementation('io.rest-assured:json-path:4.1.2')
    testImplementation('io.rest-assured:xml-path:4.1.2')
}

apply from: 'gradle/unit-test.gradle'
apply from: 'gradle/functional-test.gradle'
apply from: 'gradle/docker-compose.gradle'
apply from: 'gradle/sonar.gradle'

bootJar {
    manifest {
        attributes 'Start-Class': 'com.roboautomator.component.MainApplication'
    }
    mainClassName = 'com.roboautomator.component.MainApplication'
}

configurations.all {
    exclude group:'junit', module:'junit'
    exclude group: 'org.junit.vintage', module:'junit-vintage-engine'
    exclude group:'org.mockito', module:'mockito-all'
    exclude group:'org.slf4j', module:'slf4j-log4j12'
    exclude group: 'org.springframework.boot', module:'spring-boot-starter-logging'
}
